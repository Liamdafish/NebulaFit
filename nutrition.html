<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nutrition Tracker</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
</head>
<body>
  <header>
    <h1>Nutrition Tracker</h1>
  </header>

  <section>
    <input type="text" id="foodSearch" placeholder="Search food...">
    <button id="searchBtn">Search</button>
  </section>

  <section id="foodListSection" style="display: none;">
    <h2>Food List</h2>
    <ul id="foodList"></ul>
  </section>

  <section id="nutritionDetails" style="display: none;">
    <h2>Nutrition Details</h2>
    <p id="foodName"></p>
    <p>Calories: <span id="calories"></span> kcal</p>
    <p>Protein: <span id="protein"></span> g</p>
    <p>Fat: <span id="fat"></span> g</p>
    <p>Carbs: <span id="carbs"></span> g</p>
    <p>Serving Size: <span id="servingSize"></span></p>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const API_URL = 'https://api.edamam.com/api/food-database/v2/parser';
      const APP_ID = 'b0c02042';
      const API_KEY = 'c85342f02e2ce14196c6818dc0ec0d11';

      const searchBtn = document.getElementById('searchBtn');
      const foodSearch = document.getElementById('foodSearch');
      const foodListSection = document.getElementById('foodListSection');
      const foodList = document.getElementById('foodList');
      const nutritionDetails = document.getElementById('nutritionDetails');
      const foodName = document.getElementById('foodName');
      const calories = document.getElementById('calories');
      const protein = document.getElementById('protein');
      const fat = document.getElementById('fat');
      const carbs = document.getElementById('carbs');
      const servingSize = document.getElementById('servingSize');

      searchBtn.addEventListener('click', function () {
        const query = foodSearch.value.trim();
        if (query) {
          fetchFoodData(query);
        }
      });

      async function fetchFoodData(query) {
        const response = await fetch(`${API_URL}?app_id=${APP_ID}&app_key=${API_KEY}&ingr=${query}`);
        const data = await response.json();

        if (data.hints) {
          displayFoodList(data.hints);
        } else {
          console.error('Error fetching data:', data);
          alert('Error fetching food data. Please try again.');
        }
      }

      function displayFoodList(foodItems) {
        foodListSection.style.display = 'block';
        foodList.innerHTML = '';
        foodItems.forEach(item => {
          const foodItem = document.createElement('li');
          foodItem.innerHTML = `
            <span>${item.food.label}</span>
            <button onclick="selectFood(${JSON.stringify(item.food.nutrients)}, '${item.food.label}')">Select</button>
          `;
          foodList.appendChild(foodItem);
        });
      }

      function selectFood(nutrients, name) {
        foodName.textContent = name;
        calories.textContent = nutrients.ENERC_KCAL;
        protein.textContent = nutrients.PROCNT;
        fat.textContent = nutrients.FAT;
        carbs.textContent = nutrients.CHOCDF;
        servingSize.textContent = '1 serving';
        nutritionDetails.style.display = 'block';
      }
    });
  </script>
</body>
</html>
